/*******************************************************************************************************/
/* This file is the same for every game.                                                               */
/* DO NOT EDIT THIS FILE.                                                                              */
/*                                                                                                     */
/* If you need to modify the methods, then you should create a sub-class that extends from this class. */
/*                                                                                                     */
/*******************************************************************************************************/

/* Author: Derek O Reilly, Dundalk Institute of Technology, Ireland.                                                   */
/* The CanvasGame class is responsible for rendering all of the gameObjects and other game graphics on the canvas.         */
/* If you want to implement collision detection in your game, then you MUST overwrite the collisionDetection() method. */

class CanvasGame {
  constructor() {
    /* render the game on the canvas */
    this.playGameLoop();
  }

  start() {
    for (let i = 0; i < islands.length; i++) {
      islands[i].start();
    }
    for (let i = 0; i < gameObjects.length; i++) {
      gameObjects[i].start();
    }
  }

  playGameLoop() {
    if (endGame) {
      return;
    }
    this.collisionDetection();
    this.render();

    /* recursively call playGameLoop() */

    requestAnimationFrame(this.playGameLoop.bind(this));
  }

  render() {
    /* clear previous rendering from the canvas */
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    if (gameObjects[0] === undefined) {
      gameObjects[0] = new GameObject();
    }

    gameObjects[BACKGROUND].render();
    gameObjects[GROUND].render();

    /* render game gameObjects on the canvas */
    for (let i = 0; i < islands.length; i++) {
      islands[i].render();
    }

    if (gameObjects[PLAYER]) gameObjects[PLAYER].render();
  }

  collisionDetection() {
    /* If you need to implement collision detection in your game, then you can overwrite this method in your sub-class. */
    /* If you do not need to implement collision detection, then you do not need to overwrite this method.              */
  }
}
